generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model cartoes {
  id                Int       @id @default(autoincrement())
  usuario_id        Int
  nome_cartao       String
  limite_total      Decimal   @db.Decimal(10, 2)
  limite_disponivel Decimal   @db.Decimal(10, 2)
  usuarios          usuarios  @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  faturas           faturas[]
}

model categorias {
  id           Int            @id @default(autoincrement())
  nome         String
  tipo         String
  cor          String?
  icone        String?
  usuario_id   Int
  usuarios     usuarios       @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  contas_pagar contas_pagar[]
  dicas        dicas[]
  transacoes   transacoes[]
}

model configuracoes {
  id                Int      @id @default(autoincrement())
  usuario_id        Int
  preferencia_chave String
  valor             String?
  usuarios          usuarios @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model contas_pagar {
  id              Int         @id @default(autoincrement())
  usuario_id      Int
  nome            String
  valor           Decimal     @db.Decimal(10, 2)
  data_vencimento DateTime    @db.Date
  pago            Boolean?    @default(false)
  categoria_id    Int?
  criado_em       DateTime?   @default(now()) @db.Timestamp(6)
  categorias      categorias? @relation(fields: [categoria_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  usuarios        usuarios    @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model dicas {
  id                    Int             @id @default(autoincrement())
  tipo                  String
  conteudo              String
  categoria_relacionada Int?
  prioridade            Int?
  categorias            categorias?     @relation(fields: [categoria_relacionada], references: [id], onDelete: Cascade, onUpdate: NoAction)
  dicas_usuario         dicas_usuario[]
}

model dicas_usuario {
  id             Int       @id @default(autoincrement())
  usuario_id     Int
  dica_id        Int
  data_fornecida DateTime? @default(now()) @db.Timestamp(6)
  dicas          dicas     @relation(fields: [dica_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  usuarios       usuarios  @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model faturas {
  id            Int             @id @default(autoincrement())
  cartao_id     Int
  mes_ano       String
  valor_total   Decimal         @db.Decimal(10, 2)
  status        String?
  criado_em     DateTime?       @default(now()) @db.Timestamp(6)
  cartoes       cartoes         @relation(fields: [cartao_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  parcelamentos parcelamentos[]
}

model historico_metas {
  id             Int       @id @default(autoincrement())
  meta_id        Int
  data_conclusao DateTime? @db.Date
  sucesso        Boolean?
  observacoes    String?
  metas          metas     @relation(fields: [meta_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model metas {
  id              Int               @id @default(autoincrement())
  usuario_id      Int
  nome            String
  valor_meta      Decimal           @db.Decimal(10, 2)
  valor_atual     Decimal?          @default(0) @db.Decimal(10, 2)
  tipo            Int
  data_inicio     DateTime          @db.Date
  data_fim        DateTime?         @db.Date
  status          String?
  criado_em       DateTime?         @default(now()) @db.Timestamp(6)
  historico_metas historico_metas[]
  usuarios        usuarios          @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model parcelamentos {
  id             Int     @id @default(autoincrement())
  fatura_id      Int
  descricao      String?
  valor_parcela  Decimal @db.Decimal(10, 2)
  total_parcelas Int
  parcela_atual  Int
  faturas        faturas @relation(fields: [fatura_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model relatorios {
  id              Int       @id @default(autoincrement())
  usuario_id      Int
  caminho_arquivo String
  formato         String
  data_geracao    DateTime? @default(now()) @db.Timestamp(6)
  usuarios        usuarios  @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model transacoes {
  id                   Int         @id @default(autoincrement())
  usuario_id           Int
  titulo               String
  descricao            String?
  categoria_id         Int?
  valor                Decimal     @db.Decimal(10, 2)
  tipo                 String
  status_transferencia String?
  criado_em            DateTime?   @default(now()) @db.Timestamp(6)
  data_trans           DateTime    @db.Date
  categorias           categorias? @relation(fields: [categoria_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  usuarios             usuarios    @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model usuarios {
  id            Int             @id @default(autoincrement())
  nome          String
  email         String          @unique
  senha_hash    String
  foto_perfil   String?
  data_criacao  DateTime?       @default(now()) @db.Timestamp(6)
  saldo         Decimal         @default(0) @db.Decimal
  despesa       Decimal         @default(0) @db.Decimal
  cartoes       cartoes[]
  categorias    categorias[]
  configuracoes configuracoes[]
  contas_pagar  contas_pagar[]
  dicas_usuario dicas_usuario[]
  metas         metas[]
  relatorios    relatorios[]
  transacoes    transacoes[]
}
